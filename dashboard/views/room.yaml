# lovelace_gen

{% set ns = namespace(room=None) %}
{% for room in _global.rooms %}
  {% if room.name == options.title %}
    {% set ns.room = room %}
  {% endif %}
{% endfor %}

type: custom:layout-card
layout_type: custom:grid-layout
layout:
  margin: 0
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr))
cards:

  {% if ns.room.lights %}
  - type: custom:button-card
    template: header_h2
    name: Lights
    view_layout:
      grid-column: 1/-1

    {% for light in ns.room.lights %}
  - type: custom:mushroom-light-card
    entity: {{ light }}
    {% endfor %}
  {% endif %}

  {% if ns.room.media %}
  - type: custom:button-card
    template: header_h2
    name: Media
    view_layout:
      grid-column: 1/-1

    {% for media in ns.room.media %}
  - type: custom:mushroom-media-player-card
    entity: {{ media }}
    show_volume_level: true
    media_controls:
      on_off
      play_pause
      previous
      next
    volume_controls:
      volume_buttons
    collapsible_controls: true
    view_layout:
      grid-column: span 2
    {% endfor %}
  {% endif %}

  {% if ns.room.thermostat %}
  - type: custom:button-card
    template: header_h2
    name: Thermostat
    view_layout:
      grid-column: 1/-1

    {% for thermostat in ns.room.thermostat %}
  - type: custom:mushroom-climate-card
    entity: {{ thermostat }}
    icon: mdi:fire
    tap_action: more-info
    show_temperature_control: true
    collapsible_controls: true
    view_layout:
      grid-column: span 2
    {% endfor %}
  {% endif %}

  {% if ns.room.other %}

  - type: custom:button-card
    template: header_h2
    name: Other
    view_layout:
      grid-column: 1/-1

    {% for item in ns.room.other %}
      {% for entity in item.entities %}
  - type: custom:mushroom-entity-card
    icon: {{ item.icon }}
    entity: {{ entity }}
    {% if item.name %}
    name: {{ item.name }}
    {% endif %}
    icon_color: orange
    view_layout:
      grid-column: span 2
    tap_action:
        {% if item.report_state_only %}
      action: none
        {% else %}
      action: toggle
        {% endif %}
      {% endfor %}
    {% endfor %}
  {% endif %}
