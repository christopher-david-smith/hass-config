# lovelace_gen

{% macro include_pages(homepage) -%}
      {% if page == 'homepage' %}
      - !include
        - views/homepage_{{ homepage }}.yaml
        - options: {{ options | tojson }}
      {% else %}
      - !include
        - views/{{ page }}.yaml
        - options: {{ options | tojson }}
      {% endif %}
{% endmacro %}

title: {{ options.title }}
path: {{ options.title }}
type: custom:grid-layout
layout:
  margin: 0
  grid-template-columns: min(50%, 400px) auto
  grid-template-areas: |
    "header header"
    "sidebar main"
  mediaquery:
    "(max-width: 799px)":
      grid-template-columns: 100%
      grid-template-areas: |
        "header"
        "main"
cards:

  # Welcome message
  - type: custom:button-card
    template: header_welcome
    view_layout:
      grid-area: "header"
      {% if options.title.lower() == "home" %}
      show: always
      {% else %}
      show:
        mediaquery: "(min-width: 800px)"
      {% endif %}

  # Navigation buttons
  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-rows: 8px auto
      grid-template-columns: min-content auto
      grid-template-areas: |
        "home gap"
        "home name"
    view_layout:
      grid-area: "header"
      {% if options.title.lower() == "home" %}
      show: never
      {% else %}
      show:
        mediaquery: "(max-width: 799px)"
      {% endif %}
    cards:
      - type: custom:button-card
        template: icon_home
        view_layout:
          grid-area: home
      - type: custom:button-card
        template: header_h1
        view_layout:
          grid-area: name
        name: {{ options.title }}

  # Sidebar, shown when in desktop mode
  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      margin: 0
    view_layout:
      grid-area: "sidebar"
      show:
        mediaquery: "(min-width: 800px)"
    cards:
      - !include
        - views/homepage_mobile.yaml
        - options: {{ options | tojson }}

  # Main window, shown when in desktop mode
  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      margin: 0
    view_layout:
      grid-area: "main"
      show:
        mediaquery: "(min-width: 800px)"
    cards:
      {{ include_pages("desktop") }}

  # Main window, shown when in mobile mode
  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      margin: 0
    view_layout:
      grid-area: "main"
      show:
        mediaquery: "(max-width: 799px)"
    cards:
      {{ include_pages("mobile") }}
