# lovelace_gen

- type: custom:button-card
  template: header_h1
  name: >
    [[[
      var date = new Date();
      var greeting;

      if(date.getHours() < 12) {
        greeting = "morning";
      } else if(date.getHours() < 18) {
        greeting = "afternoon";
      } else {
        greeting = "evening";
      }

      return "Good " + greeting + ", " + user.name + " ðŸ‘‹";
    ]]]
  styles:
    name:
      - white-space: normal

- type: custom:button-card
  template: header_h2
  name: Quick Links
  view_layout:
    show:
      mediaquery: "(max-width: 799px)"

- type: custom:layout-card
  layout_type: custom:grid-layout
  layout:
    grid-template-columns: repeat(auto-fit, minmax(50px, 1fr))
    margin: -4px
  view_layout:
    show:
      mediaquery: "(max-width: 799px)"
  cards:

    - type: custom:mushroom-template-card
      layout: vertical
      icon: mdi:security
      icon_color: orange 
      tap_action:
        action: navigate
        navigation_path: security
      badge_icon: >
        {% raw %}
          {% if is_state('alarm_control_panel.home', 'armed_away') %}
            mdi:lock
          {% else %}
            mdi:lock-open
          {% endif %}
        {% endraw %}
      badge_color: > 
        {% raw %}
          {% if is_state('alarm_control_panel.home', 'armed_away') %}
            red
          {% else %}
            green
          {% endif %}
        {% endraw %}

    - type: custom:mushroom-template-card
      layout: vertical
      icon: mdi:account-multiple
      icon_color: blue
      tap_action: 
        action: navigate
        navigation_path: people
      badge_icon: mdi:home
      badge_color: >
        {% raw %}
          {% if is_state('input_boolean.home', 'on') %}
            green
          {% else %}
            red
          {% endif %}
        {% endraw %}

    - type: custom:mushroom-template-card
      layout: vertical
      icon: mdi:movie-open
      icon_color: green
      tap_action:
        action: navigate
        navigation_path: scenes

    - type: custom:mushroom-template-card
      layout: vertical
      icon: mdi:lightning-bolt
      icon_color: yellow
      tap_action:
        action: navigate
        navigation_path: energy

    - type: custom:mushroom-template-card
      layout: vertical
      icon: mdi:reload
      icon_color: purple
      tap_action:
        action: fire-dom-event
        browser_mod:
          service: browser_mod.javascript
          data:
            browser_id: THIS
            code: lovelace_reload();

- type: custom:gap-card
  height: 3

- type: custom:button-card
  template: header_h2
  name: Rooms
- type: custom:layout-card
  layout_type: custom:grid-layout
  layout:
    grid-template-columns: repeat(auto-fit, minmax(34%, 1fr))
    margin: -4px
  cards:
    - type: custom:button-card
      template: room
      name: Home
      icon: mdi:house
      tap_action:
        action: navigate
        navigation_path: "home"
      variables:
        highlight: {% if title == "Home" %} true {% else %} false {% endif %}
      view_layout:
        show:
          mediaquery: "(min-width: 800px)"
    {% for room in _global.rooms %}
    - type: custom:button-card
      template: room
      name: {{ room.name }}
      icon: {{ room.icon }}
      tap_action:
        action: navigate
        navigation_path: {{ room.name }}
      variables:
        highlight: {% if room.name == title %} true {% else %} false {% endif %}
        temperature: {{ room.temperature }}
        entities:
          lights: {{ room.lights }}
          media: {{ room.media }}
          climate: {{ room.thermostat }}
          {% if room.other %}
          other:
            {% for item in room.other %}
            - icon: {{ item.icon }}
              entities:
                {% for entity in item.entities %}
                - {{ entity }}
                {% endfor %}
            {% endfor %}
          {% endif %}
    {% endfor %}

- type: custom:button-card
  name: Reload Dashboard
  icon: mdi:reload
  view_layout:
    show:
      mediaquery: "(min-width: 799px)"
  styles:
    grid:
      - grid-template-areas: '"i . n"'
      - grid-template-columns: 30px 10px 1fr
    icon:
      - width: 100%
      - height: 100%
    card:
      - margin-top: 5px
      - padding: 10px
  extra_styles: |
    @keyframes rotation {
      0% {
        transform: rotate(0deg);
      }
      70%, 100% {
        transform: rotate(359deg);
      }
    }

    ha-card:hover div#img-cell {
      animation: rotation 3s infinite linear; 
      transform-origin: 46% 51% 
    }
  tap_action:
    action: fire-dom-event
    browser_mod:
      service: browser_mod.javascript
      data:
        browser_id: THIS
        code: lovelace_reload();
